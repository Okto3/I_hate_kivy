#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import MapView kivy.garden.mapview.MapView

MyScreenManager:
    
    FirstScreen:
    StartScreen:
    SearchLyricsScreen:
    displayLyricsScreen:
    EventRego:
    RecordAudio:
    Mappopup:

    
<FirstScreen>:
    name: 'loginPage'
    size_hint: None, None
    size: 300,533
    #pos_hint: {"center_x": 0.5, "center_y": 0.5}
    elevation: 10
    #padding: 25
    #spacing: 25
    orientation: 'vertical'
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
            
    BoxLayout:
        orientation: 'vertical'
        padding: 25
        spacing: 15
        Label:
            id: welcome_label
            text: "WELCOME"
            font_size:40
            halign: 'center'
            valign: 'top'
            color: 0.3,0.3,0.3,1
            size_hint_y: 1
            height: self.texture_size[1]
            padding_y:30
        
        TextInput:
            id: username
            hint_text: "username"
            font_size: 18
            pos_hint: {"centre_x":0.5}
            size_hint: (1, None)
            height: 35
            multiline: False
            
        
        TextInput:
            id: password
            hint_text: "password"
            font_size: 18
            pos_hint: {"centre_x":0.5}
            size_hint: (1, None)
            height: 35
            multiline: False
            spacing: 10

        BoxLayout:
            orientation: 'vertical'
            spacing: 15
            Button:
                id: submitLoginButton
                text: "Submit"
                pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 40
                multiline: False
                on_release:
                    root.manager.transition.direction = 'up' 
                    app.root.getLogin()
                    
            
            Button:
                id: registerButton
                text: "Register"
                pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 40
                multiline: False
                on_release: 
                    app.root.getRegistration()
                
<StartScreen>:
    name: 'start'
    size_hint: None, None
    size: 300,533
    #pos_hint: {"center_x": 0.5, "center_y": 0.5}
    elevation: 10
    padding: 15
    spacing: 15
    orientation: 'vertical'
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        spacing: 30
        #padding: 15
        Label:
            id: songTitleLable
            text: "Upcoming Karaoke Events"
            font_size:40
            halign: 'center'
            pos_hint: {"x":0,"y":0.8}
            color: 0.3,0.3,0.3,1
            padding_y:30
            text_size: self.width, None
            size_hint: 1, None
        BoxLayout:
            orientation: 'vertical'
            id: buttonGrid
            

        BoxLayout:
            orientation: 'horizontal'
            padding: 15
            spacing: 70
            
            MDIconButton:
                id: eventRegistration
                icon: "calendar"
                pos_hint: {"centre_x":0.5}
                size: min(self.size), min(self.size)
                height: 40
                multiline: False
                on_release: 
                    root.manager.transition.direction = 'right' 
                    root.manager.current = 'EventRego'
            MDIconButton:
                id: recordAudio
                icon: "record-circle-outline"
                pos_hint: {"centre_x":0.5}
                size: min(self.size), min(self.size)
                height: 40
                multiline: False
                on_release: 
                    root.manager.transition.direction = 'up' 
                    root.manager.current = 'recordAudio'
            MDIconButton:
                id: submitSongTitle
                icon: "music-note"
                pos_hint: {"centre_x":0.5}
                size: min(self.size), min(self.size)
                height: 40
                multiline: False
                on_release: 
                    root.manager.transition.direction = 'left' 
                    root.manager.current = 'SearchLyricsPage'

<SearchLyricsScreen>:
    name: 'SearchLyricsPage'
    padding: 15
    spacing: 15
    orientation: 'vertical'
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
            
    BoxLayout:
        orientation: 'vertical'
        padding: 15
        spacing: 15
        Label:
            id: songTitleLable
            text: "Seach For Song"
            font_size:40
            halign: 'center'
            valign: 'top'
            color: 0.3,0.3,0.3,1
            height: self.texture_size[1]
            padding_y:10
            text_size: self.width, None
            size_hint: 1, None
        
        TextInput:
            id: songTitle
            hint_text: "Title"
            font_size: 18
            pos_hint: {"centre_x":0.5}
            size_hint: (1, None)
            height: 35
            multiline: False
        
        TextInput:
            id: artist
            hint_text: "Artist"
            font_size: 18
            pos_hint: {"centre_x":0.5}
            size_hint: (1, None)
            height: 35
            multiline: False
        
        Label:
            id: recentSongs
            text: "Recents:"
            font_size:20
            halign: 'left'
            valign: 'top'
            color: 0.3,0.3,0.3,1
            height: self.texture_size[1]
            padding_y:0
            text_size: self.width, None
            size_hint: 1, None
        GridLayout:
            valign: 'top'
            id: grid
            cols: 1

        BoxLayout:
            orientation: 'vertical'
            #padding: 15
            spacing: 15

            Button:
                id: submitSongTitle
                text: "Search"
                pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 40
                multiline: False
                on_release: 
                    root.manager.transition.direction = 'left' 
                    app.root.getLyrics()
            Button:
                id: backToHome
                text: "Back"
                pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 40
                multiline: False
                on_release: 
                    root.manager.transition.direction = 'right' 
                    root.manager.current = 'start'

<displayLyricsScreen>:
    name: 'displayLyricsPage'
    size_hint: None, None
    size: 300,533
    elevation: 10
    padding: 25
    spacing: 25
    orientation: 'vertical'
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            minimum_height: self.height
            Label:
                
                id: lyricsLable
                text: ""
                font_size:20
                halign: 'left'
                pos_hint: {"x":0,"y":0.8}
                color: 0.3,0.3,0.3,1
                padding: (10,30)
                text_size: self.width, None
                size_hint_y: None
                height: self.texture_size[1]
        
        Button:
            id: backToHome
            text: "Back"
            pos_hint: {"centre_x":0.5}
            size_hint: (1, None)
            height: 40
            multiline: False
            on_release:
                root.manager.transition.direction = 'right'  
                app.root.current = 'SearchLyricsPage'

<EventRego>:
    name: 'EventRego'
    size_hint: None, None
    size: 300,533    
    orientation: 'vertical'
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        height: self.minimum_height
        padding: 15
        spacing: 15
        Label:
            text: "Register a Karaoke Event"
            id: date_label
            font_size:30
            halign: 'center'
            color: 0.3,0.3,0.3,1
            padding_y:30
            text_size: self.width, None
            size_hint: 1, None
        Button:
            text: "Select Date"
            id: date_button
            height: 40
            multiline: False
            size_hint: (1, None)
            background_color: (0,1,1,0.7)
            on_release: root.show_date_picker()
        Button:
            text: "Select Time"
            id: time_button
            height: 40
            multiline: False
            size_hint: (1, None)
            background_color: (0,1,1,0.7)
            on_release: root.show_time_picker()
        TextInput:
            id: address
            hint_text: "Address"
            font_size: 18
            pos_hint: {"centre_x":0.5}
            size_hint: (1, None)
            height: 35
            multiline: False
        BoxLayout:
            orientation: 'horizontal'
            spacing: 15
            TextInput:
                id: city
                hint_text: "City"
                font_size: 18
                pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 35
                multiline: False
            TextInput:
                id: postcode
                hint_text: "Postcode"
                font_size: 18
                pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 35
                multiline: False
        TextInput:
            id: description
            hint_text: "Brief Description"
            font_size: 18
            pos_hint: {"centre_x":0.5}
            size_hint: (1, None)
            height: 50
        Label:
            text: ' '
            height: 50
            
        BoxLayout:
            orientation: 'vertical'
            spacing: 15
            Button:
                id: saveRego
                text: "Save"
                #pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 40
                multiline: False
                on_release: 
                    root.manager.transition.direction = 'left'
                    app.root.getEventRegistration() 
                    app.root.current = "start"
            Button:
                id: backToHome
                text: "Back"
                #pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 40
                multiline: False
                on_release: 
                    root.manager.transition.direction = 'left' 
                    app.root.current = "start"

<RecordAudio>:
    name: 'recordAudio'
    size_hint: None, None
    size: 300,533
    elevation: 10
    padding: 25
    spacing: 25
    orientation: 'vertical'
    BoxLayout:
        orientation: 'vertical'
        padding: 15
        spacing: 15
        Label:
            text: "Recording Audio"
            font_size:40
            halign: 'center'
            pos_hint: {"x":0,"y":0.8}
            color: 0.3,0.3,0.3,1
            padding_y:10
            text_size: self.width, None
            size_hint: 1, None
        BoxLayout:
            orientation: 'vertical'
            spacing: 10
            Label:
                text: "Duration:"
                font_size:20
                halign: 'left'
                pos_hint: {"x":0,"y":0.8}
                color: 0.3,0.3,0.3,1
                padding_y: 15
                text_size: self.width, None
                size_hint: 1, None
            Slider:
                id: slider
                min: 0
                max: 10
                step: 1
                value_track: True
                value_track_color: 0.3,0.3,0.3,1
                value: 5
                orientation: 'horizontal'
                on_value: app.root.sliderValue(self.value)
            Button:
                id: startRecording
                text: "Start Recording"
                pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                background_color: (0,1,1,0.7)
                height: 40
                multiline: False
                on_release:
                    app.root.recordAudio()
            Button:
                id: playBack
                text: "Play Back Audio"
                pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 40
                background_color: (0,1,1,0.7)
                multiline: False
                on_release:
                    app.root.playAudio()
            TextInput:
                id: descriptionOfAudio
                hint_text: "Description"
                font_size: 15
                pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 30
                multiline: False
            Button:
                id: saveAudio
                text: "Save"
                pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 40
                multiline: False
                on_release:
                    app.root.uploadAudio()
        Button:
            id: backToHome
            text: "Back"
            pos_hint: {"centre_x":0.5}
            size_hint: (1, None)
            height: 40
            multiline: False
            on_release:
                root.manager.transition.direction = 'down'  
                app.root.current = 'start'




<Mappopup>:
    name: "Mappopup"
    MapView:
        id: Mappopup
        lat: -27.47
        lon: 153
        zoom: 11
        MapMarkerPopup:
            id: a
            lat: 1
            lon: 1
            Button:
                id: 1
                text: "Register Interest"
                pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 40
                multiline: False
                on_release:
                    app.root.registerInterest(0)

        MapMarkerPopup:
            id: b
            lat: 1
            lon: 1
            Button:
                id: 2
                text: "Register Interest"
                pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 40
                multiline: False
                on_release:
                    app.root.registerInterest(1)
        MapMarkerPopup:
            id: c
            lat: 1
            lon: 1
            Button:
                id: 3
                text: "Register Interest"
                pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 40
                multiline: False
                on_release:
                    app.root.registerInterest(2)
        MapMarkerPopup:
            id: d
            lat: 1
            lon: 1
            Button:
                id: 4
                text: "Register Interest"
                pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 40
                multiline: False
                on_release:
                    app.root.registerInterest(3)
        MapMarkerPopup:
            id: e
            lat: 1
            lon: 1
            Button:
                id: 5
                text: "Register Interest"
                pos_hint: {"centre_x":0.5}
                size_hint: (1, None)
                height: 40
                multiline: False
                on_release:
                    app.root.registerInterest(4)
        
    Button:
        id: backToHome
        text: "Back"
        pos_hint: {"centre_x":0.5}
        size_hint: (1, None)
        height: 40
        multiline: False
        on_release:
            app.root.current = 'start'

